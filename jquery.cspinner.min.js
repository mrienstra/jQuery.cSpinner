/*!
 * jQuery.cSpinner, v0.2.4
 * https://github.com/mrienstra/jQuery.cSpinner
 *
 * Copyright 2011, Michael Rienstra
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based on code by Thijs van der Vossen, Fingertips, http://www.fngtps.com
 *
 * A jQuery plugin to create animated loading indicators using the canvas element
 *
 * Date: Fri Jun 10, 2011
 */
(function(g){var k={init:function(c){var d=this;if(!function(){var c=document.createElement("canvas");return!(!c.getContext||!c.getContext("2d"))})return this;this.each(function(A){var a={speed:1,scale:1,lineWidth:3,lineCap:"round",innerRadius:8.7,outerRadius:14.42,color:"#000",minimumOpacity:0.18,segments:12,shadow:!1,shadowOffsetX:1,shadowOffsetY:1,shadowBlur:1,shadowColor:"rgba(10, 10, 10, 0.5)",pixelRatio:1,autoStart:!0,checkExistsInterval:1E3,preserveExisting:["id","class","style"]},b,s,o=["lineWidth",
"innerRadius","outerRadius","shadowOffsetX","shadowOffsetY","shadowBlur"],p,k,h,i,n,t,q,l,f,u=g(this),v,m,w,j,e,r=[],x=[],y=0,z;c&&g.extend(a,c);b=0;for(s=o.length;b<s;b+=1)a[o[b]]*=a.scale;p=a.segments;k=1E3/a.speed/p;o=a.outerRadius;h=o+a.lineWidth;if(a.shadow)i=a.shadowOffsetX,n=a.shadowOffsetY,h+=i>n?i:n,h+=a.shadowBlur;h=Math.ceil(h);t=h*2;q=a.pixelRatio;q!==1&&(l=String(t)+"px",t*=q);this.nodeName!=="CANVAS"?(f=g("<canvas />"),u.replaceWith(function(){b=0;for(s=a.preserveExisting.length;b<s;b+=
1)v=a.preserveExisting[b],u.attr(v)&&f.attr(v,u.attr(v));return f}),f=f[0],m=g(f)):(f=this,m=u);w=m.attr("id");w===""?(j="cSpinner"+String(Math.random()).substring(2),m.attr("id",j),j="#"+j):g("#"+w).length!==1?(j="cSpinner"+String(Math.random()).substring(2),m.addClass(j),j="."+j):j="#"+w;f.width=f.height=t;e=f.getContext("2d");e.lineWidth=a.lineWidth;e.lineCap=a.lineCap;e.strokeStyle=a.color;if(a.shadow)e.shadowOffsetX=i,e.shadowOffsetY=n,e.shadowBlur=a.shadowBlur,e.shadowColor=a.shadowColor;q!==
1&&(e.scale(q,q),m.css({width:l,height:l}));i=a.minimumOpacity;i<=0&&(i=1.0E-4);for(b=0;b<p;b+=1)l=2*Math.PI/p*b-Math.PI/2,n=Math.cos(l),l=Math.sin(l),r[b]=[a.innerRadius*n,a.innerRadius*l,o*n,o*l],x[b]=Math.pow(b/(p-1),i*10)*(1-i)+i;z=Math.round(a.checkExistsInterval/k);m.data("cSpinner",{originalTarget:this,startAnimating:function(){var a=setInterval(function(){e.clearRect(0,0,f.width,f.height);x.unshift(x.pop());for(b=0;b<p;b+=1)e.globalAlpha=x[b],e.beginPath(),e.moveTo(h+r[b][0],h+r[b][1]),e.lineTo(h+
r[b][2],h+r[b][3]),e.stroke();y%z===0&&g(j).length!==1&&clearInterval(a);y+=1},k);return a}});a.autoStart===!0&&m.cSpinner("start");f!==this&&(d[A]=f)});return d},start:function(){return this.each(function(){var c=g(this),d=c.data("cSpinner"),k;d&&d.startAnimating&&(k=d.startAnimating(),c.data("cSpinner",{originalTarget:d.originalTarget,startAnimating:d.startAnimating,intervalID:k}))})},stop:function(){return this.each(function(){var c=g(this).data("cSpinner");c&&c.intervalID&&clearInterval(c.intervalID)})},
restore:function(){return this.each(function(){var c=g(this),d=c.data("cSpinner");d&&d.intervalID&&clearInterval(d.intervalID);d&&d.originalTarget&&c.replaceWith(d.originalTarget)})}};g.fn.cSpinner=function(c){if(k[c])return k[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||!c)return k.init.apply(this,arguments);else g.error("jQuery.cSpinner: Method \u201c"+c+"\u201d does not exist")}})(jQuery);
