/*!
 * jQuery.cSpinner, v0.2.1
 * https://github.com/mrienstra/jQuery.cSpinner
 *
 * Copyright 2011, Michael Rienstra
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based on code by Thijs van der Vossen, Fingertips, http://www.fngtps.com
 *
 * A jQuery plugin to create animated loading indicators using the canvas element
 *
 * Date: Tue Jun 7, 2011
 */
(function(g){var t=function(){var c=document.createElement("canvas");return!(!c.getContext||!c.getContext("2d"))},i={init:function(c){var k=this;if(!t)return console.log("jQuery.cSpinner: Canvas not supported"),this;this.each(function(u){var a={scale:1,width:3,inner:8.7,outer:14.42,color:"#000",segments:12,speed:1,shadow:!1,shadowOffsetX:1,shadowOffsetY:1,shadowBlur:1,shadowColor:"rgba(10, 10, 10, 0.5)",checkExistsInterval:1E3,preserveExisting:["id","class","style"],autoStart:!0},n=g(this),e,b,i,
o,j,f,h,d,l,m=[],p=[],q,r=0,s;c&&g.extend(a,c);a.width*=a.scale;a.inner*=a.scale;a.outer*=a.scale;a.delay=1E3/a.speed/a.segments;a.center=Math.ceil(a.outer+a.width);a.canvasSize=a.center*2;if(window.devicePixelRatio&&window.devicePixelRatio!==1)a.canvasSizeCSS=a.canvasSize+"px",a.canvasSize*=window.devicePixelRatio;this.nodeName!=="CANVAS"?(e=g("<canvas />"),n.replaceWith(function(){b=0;for(i=a.preserveExisting.length;b<i;b++)o=a.preserveExisting[b],n.attr(o)&&e.attr(o,n.attr(o));return e}),e=e[0],
j=g(e)):(e=this,j=n);f=j.attr("id");f===""?(h="cSpinner"+String(Math.random()).substring(2),j.attr("id",h),h="#"+h):g("#"+f).length!==1?(h="cSpinner"+String(Math.random()).substring(2),j.addClass(h),h="."+h):h="#"+f;e.width=e.height=a.canvasSize;d=e.getContext("2d");d.lineWidth=a.width;d.lineCap="round";d.strokeStyle=a.color;if(a.shadow)d.shadowOffsetX=a.shadowOffsetX*a.scale,d.shadowOffsetY=a.shadowOffsetY*a.scale,d.shadowBlur=a.shadowBlur*a.scale,d.shadowColor=a.shadowColor;window.devicePixelRatio&&
window.devicePixelRatio!==1&&(d.scale(window.devicePixelRatio,window.devicePixelRatio),j.css({width:a.canvasSizeCSS,height:a.canvasSizeCSS}));for(b=0;b<a.segments;b++)l=2*Math.PI/a.segments*b-Math.PI/2,f=Math.cos(l),l=Math.sin(l),m[b]=[a.inner*f,a.inner*l,a.outer*f,a.outer*l],p[b]=Math.pow(b/(a.segments-1),1.8)*(1-0.18)+0.18;r=0;s=Math.round(a.checkExistsInterval/a.delay);f=function(){return setInterval(function(){d.clearRect(0,0,e.width,e.height);p.unshift(p.pop());for(b=0;b<a.segments;b++)d.globalAlpha=
p[b],d.beginPath(),d.moveTo(a.center+m[b][0],a.center+m[b][1]),d.lineTo(a.center+m[b][2],a.center+m[b][3]),d.stroke();r++%s===0&&g(h).length!==1&&clearInterval(q)},a.delay)};a.autoStart===!0?(q=f(),j.data("cSpinner",{intervalID:q,startAnimating:f})):j.data("cSpinner",{startAnimating:f});e!==this&&(k[u]=e)});return k},start:function(){return this.each(function(){var c=g(this),k=c.data("cSpinner"),i;k&&k.startAnimating&&(i=k.startAnimating(),c.data("cSpinner",{intervalID:i,startAnimating:k.startAnimating}))})},
stop:function(){return this.each(function(){var c=g(this).data("cSpinner");c&&c.intervalID&&clearInterval(c.intervalID)})}};g.fn.cSpinner=function(c){if(i[c])return i[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||!c)return i.init.apply(this,arguments);else g.error("jQuery.cSpinner: Method \u201c"+c+"\u201d does not exist")}})(jQuery);