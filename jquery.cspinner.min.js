/*!
 * jQuery.cSpinner, v0.2.5
 * https://github.com/mrienstra/jQuery.cSpinner
 *
 * Copyright 2011, Michael Rienstra
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based on code by Thijs van der Vossen, Fingertips, http://www.fngtps.com
 *
 * A jQuery plugin to create animated loading indicators using the canvas element
 *
 * Date: Wed Jul 6, 2011
 */
(function(e){var x={init:function(d){var b=this,o=function(){var b=document.createElement("canvas");return!(!b.getContext||!b.getContext("2d"))}();this.each(function(x){var a={speed:1,scale:1,lineWidth:3,lineCap:"round",innerRadius:8.7,outerRadius:14.42,color:"#000",minimumOpacity:0.18,segments:12,shadow:!1,shadowOffsetX:1,shadowOffsetY:1,shadowBlur:1,shadowColor:"rgba(10, 10, 10, 0.5)",pixelRatio:1,autoStart:!0,pauseOnBlur:!0,alwaysReplaceTarget:!1,fallbackSrc:void 0,checkExistsInterval:1E3,preserveExisting:["id",
"class","style"]},c,y,s=["lineWidth","innerRadius","outerRadius","shadowOffsetX","shadowOffsetY","shadowBlur"],i,D,l,m,p,q,g,r,h,j="<canvas /><canvas />",z=e(this),A,k,t,B,v,n,E,f,w=[],C=[],u=0,F;d&&e.extend(a,d);if(!o)if(typeof a.fallbackSrc==="undefined")return!0;else j="<img />";c=0;for(y=s.length;c<y;c+=1)a[s[c]]*=a.scale;i=a.segments;D=1E3/a.speed/i;s=a.outerRadius;l=s+a.lineWidth;if(a.shadow)m=a.shadowOffsetX,p=a.shadowOffsetY,l+=m>p?m:p,l+=a.shadowBlur;l=Math.ceil(l);q=r=l*2;g=a.pixelRatio;
g!==1&&(q*=g);a.alwaysReplaceTarget===!0||this.nodeName!=="DIV"?(h=e("<div>"+j+"</div>"),z.replaceWith(function(){c=0;for(y=a.preserveExisting.length;c<y;c+=1)A=a.preserveExisting[c],z.attr(A)&&h.attr(A,z.attr(A));return h}),h=h[0],k=e(h)):(h=this,k=z,k.html(j));k.css({overflow:"hidden",width:String(r)+"px",height:String(r)+"px"});j=k.attr("id");j===""?(n="cSpinner"+String(Math.random()).substring(2),k.attr("id",n),n="#"+n):e("#"+j).length!==1?(n="cSpinner"+String(Math.random()).substring(2),k.addClass(n),
n="."+n):n="#"+j;if(o){if(t=e("canvas:eq(0)",h),j=t[0],j.width=q,j.height=q*i,E=j.getContext("2d"),B=e("canvas:eq(1)",h),v=B[0],B.css("display","none"),v.width=v.height=q,f=v.getContext("2d"),f.lineWidth=a.lineWidth,f.lineCap=a.lineCap,f.strokeStyle=a.color,a.shadow)f.shadowOffsetX=m,f.shadowOffsetY=p,f.shadowBlur=a.shadowBlur,f.shadowColor=a.shadowColor}else t=e("img",h),t.attr("src",a.fallbackSrc);g!==1&&(o&&E.scale(g,g),t.css({width:String(r)+"px",height:String(r*i)+"px"}));m=a.minimumOpacity;
m<=0&&(m=1.0E-4);for(c=0;c<i;c+=1)g=2*Math.PI/i*c-Math.PI/2,p=Math.cos(g),g=Math.sin(g),w[c]=[a.innerRadius*p,a.innerRadius*g,s*p,s*g],C[c]=Math.pow(c/(i-1),m*10)*(1-m)+m;F=Math.round(a.checkExistsInterval/D);k.data("cSpinner",{originalTarget:this,startAnimating:function(){var a=setInterval(function(){if(o&&u<i){f.clearRect(0,0,q,q);C.unshift(C.pop());for(c=0;c<i;c+=1)f.globalAlpha=C[c],f.beginPath(),f.moveTo(l+w[c][0],l+w[c][1]),f.lineTo(l+w[c][2],l+w[c][3]),f.stroke();E.drawImage(v,0,u*r);u+1===
i&&B.remove()}t.css("margin-top",String(-1*u%i*r)+"px");u%F===0&&e(n).length!==1&&clearInterval(a);u+=1},D);return a}});a.autoStart===!0&&k.cSpinner("start");a.pauseOnBlur===!0&&e(window).blur(function(){k.cSpinner("stop")}).focus(function(){k.cSpinner("start")});h!==this&&(b[x]=h)});return b},start:function(){return this.each(function(){var d=e(this),b=d.data("cSpinner"),o;b&&b.startAnimating&&!b.intervalID&&(o=b.startAnimating(),d.data("cSpinner",{originalTarget:b.originalTarget,startAnimating:b.startAnimating,
intervalID:o}))})},stop:function(){return this.each(function(){var d=e(this),b=d.data("cSpinner");b&&b.intervalID&&(clearInterval(b.intervalID),d.data("cSpinner",{originalTarget:b.originalTarget,startAnimating:b.startAnimating}))})},restore:function(){return this.each(function(){var d=e(this),b=d.data("cSpinner");b&&b.intervalID&&clearInterval(b.intervalID);b&&b.originalTarget&&d.replaceWith(b.originalTarget)})}};e.fn.cSpinner=function(d){if(x[d])return x[d].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof d==="object"||!d)return x.init.apply(this,arguments);else e.error("jQuery.cSpinner: Method \u201c"+d+"\u201d does not exist")}})(jQuery);