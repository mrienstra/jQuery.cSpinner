/*!
 * jQuery.cSpinner, v0.2.3
 * https://github.com/mrienstra/jQuery.cSpinner
 *
 * Copyright 2011, Michael Rienstra
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based on code by Thijs van der Vossen, Fingertips, http://www.fngtps.com
 *
 * A jQuery plugin to create animated loading indicators using the canvas element
 *
 * Date: Tue Jun 7, 2011
 */
(function(h){var f={init:function(c){var r=this;if(!function(){var c=document.createElement("canvas");return!(!c.getContext||!c.getContext("2d"))})return window.console&&window.console.log&&window.console.log("jQuery.cSpinner: Canvas not supported"),this;this.each(function(m){var a={scale:1,width:3,inner:8.7,outer:14.42,color:"#000",segments:12,speed:1,shadow:!1,shadowOffsetX:1,shadowOffsetY:1,shadowBlur:1,shadowColor:"rgba(10, 10, 10, 0.5)",checkExistsInterval:1E3,preserveExisting:["id","class",
"style"],autoStart:!0,lineCap:"round",pixelRatio:1},i=["width","inner","outer","shadowOffsetX","shadowOffsetY","shadowBlur"],b,n,e,o=h(this),p,g,j,d,k,l=[],q=[],f,s=0,t;c&&h.extend(a,c);b=0;for(n=i.length;b<n;b++)a[i[b]]*=a.scale;a.delay=1E3/a.speed/a.segments;a.center=a.outer+a.width;a.shadow&&(a.center+=a.shadowOffsetX>a.shadowOffsetY?a.shadowOffsetX:a.shadowOffsetY,a.center+=a.shadowBlur);a.center=Math.ceil(a.center);a.canvasSize=a.center*2;if(a.pixelRatio!==1)a.canvasSizeCSS=a.canvasSize+"px",
a.canvasSize*=a.pixelRatio;this.nodeName!=="CANVAS"?(e=h("<canvas />"),o.replaceWith(function(){b=0;for(n=a.preserveExisting.length;b<n;b++)p=a.preserveExisting[b],o.attr(p)&&e.attr(p,o.attr(p));return e}),e=e[0],i=h(e)):(e=this,i=o);g=i.attr("id");g===""?(j="cSpinner"+String(Math.random()).substring(2),i.attr("id",j),j="#"+j):h("#"+g).length!==1?(j="cSpinner"+String(Math.random()).substring(2),i.addClass(j),j="."+j):j="#"+g;e.width=e.height=a.canvasSize;d=e.getContext("2d");d.lineWidth=a.width;d.lineCap=
a.lineCap;d.strokeStyle=a.color;if(a.shadow)d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowColor=a.shadowColor;a.pixelRatio!==1&&(d.scale(a.pixelRatio,a.pixelRatio),i.css({width:a.canvasSizeCSS,height:a.canvasSizeCSS}));for(b=0;b<a.segments;b++)k=2*Math.PI/a.segments*b-Math.PI/2,g=Math.cos(k),k=Math.sin(k),l[b]=[a.inner*g,a.inner*k,a.outer*g,a.outer*k],q[b]=Math.pow(b/(a.segments-1),1.8)*(1-0.18)+0.18;s=0;t=Math.round(a.checkExistsInterval/a.delay);
g=function(){return window.setInterval(function(){d.clearRect(0,0,e.width,e.height);q.unshift(q.pop());for(b=0;b<a.segments;b++)d.globalAlpha=q[b],d.beginPath(),d.moveTo(a.center+l[b][0],a.center+l[b][1]),d.lineTo(a.center+l[b][2],a.center+l[b][3]),d.stroke();s++%t===0&&h(j).length!==1&&window.clearInterval(f)},a.delay)};a.autoStart===!0?(f=g(),i.data("cSpinner",{intervalID:f,startAnimating:g})):i.data("cSpinner",{startAnimating:g});e!==this&&(r[m]=e)});return r},start:function(){return this.each(function(){var c=
h(this),f=c.data("cSpinner"),m;f&&f.startAnimating&&(m=f.startAnimating(),c.data("cSpinner",{intervalID:m,startAnimating:f.startAnimating}))})},stop:function(){return this.each(function(){var c=h(this).data("cSpinner");c&&c.intervalID&&window.clearInterval(c.intervalID)})}};h.fn.cSpinner=function(c){if(f[c])return f[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||!c)return f.init.apply(this,arguments);else h.error("jQuery.cSpinner: Method \u201c"+c+"\u201d does not exist")}})(jQuery);
